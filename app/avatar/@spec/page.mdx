import { Badge } from 'beta-parity-react/ui/Badge';
import Image from '@components/showcase/ImagePreview';
import Component from '@components/showcase/CodePreview';
import * as Demo from '@public/demo/avatar';

{/* Image => Image Example */}
{/* Component => Component Example */}

:::callout[note]
Avatars represent users or entities through images, initials, or icons. They can display status indicators, work in groups, and serve as interactive triggers.
:::

## Design checklist <span id="design-checklist"></span>

{/* Design checklist specification */}

| Status | Item          | Description                                                                                                                                                                                                                       |
| ------ | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ‚úîÔ∏è     | Anatomy       | Includes descriptions of all parts of the component and its major variants.                                                                                                                                                       |
| ‚úîÔ∏è     | States        | Includes all applicable interaction, display and value states.                                                                                                                                                                    |
| ‚úîÔ∏è     | Options       | Includes all relevant options (functional type, stylistic kind, semantic color, size, orientation, optional iconography, decorations, etc.)                                                                                       |
| ‚úîÔ∏è     | Color schemes | Includes both light and dark color schemes.                                                                                                                                                                                       |
| ‚úîÔ∏è     | Behaviors     | Includes descriptions of behaviors related to other components and responsive behaviors related to media breakpoints, size (minimums and maximums), orientation, alignment, position and layout (wrapping, truncation, overflow). |

## Anatomy <span id="anatomy"></span>

The Avatar component consists of three main variants - standard Avatar, AvatarGroup, and AvatarTrigger - each with their own specific anatomical elements.

### Avatar

The standard Avatar contains:

- **Container**: A circular container that holds the avatar content
- **Content**: Can be one of:
  - **Image**: User photo or entity image
  - **Initials**: Text representing user's initials
  - **Placeholder icon**: Default icon when no image or initials are provided
- **Status indicator**: Optional visual indicator showing user status
  - **Dot**: A small colored circle positioned at the edge of the avatar
  - **Border**: A colored outline surrounding the avatar
- **Border**: Optional decorative or functional border around the avatar

<Component>
  <Demo.ImageAvatar />
  <Demo.InitialsAvatar />
  <Demo.StatusDotsAvatar />
  <Demo.StatusBorderAvatar />
</Component>

### AvatarGroup

The AvatarGroup combines multiple avatars:

- **Container**: Groups and positions multiple avatars
- **Avatars**: Individual avatar components
- **Overflow indicator**: Appears when there are more avatars than can be displayed
  - **Count**: Shows how many additional avatars are not displayed
  - **Background**: Uses the avatar styling but contains the count

<Component>
  <Demo.AvatarGroup />
</Component>

### AvatarTrigger

The AvatarTrigger extends the standard Avatar with:

- **Interactive state**: Visual feedback for hover, focus, and active states
- **Active indicator**: Shows when the avatar is in an active/selected state

<Component>
  <Demo.AvatarTrigger />
</Component>

## States <span id="states"></span>

Avatars can exist in various states that communicate status and interaction feedback.

### Image states

- **Default**: Shows the provided image
- **Error/Fallback**: When image fails to load, shows initials or placeholder icon
- **Loading**: While image is loading (handled automatically by Next.js Image component)

### Interaction states (AvatarTrigger)

- **Default**: Normal appearance
- **Hover**: Visual feedback when pointer is over the avatar
- **Focus**: Visual indication when focused via keyboard
- **Active**: Visual indication when avatar is clicked/pressed
- **Selected**: When the avatar represents selected state
- **Disabled**: When interaction is not available

<Component>
  <Demo.DisabledAvatar />
</Component>

### Status states

- **No status**: Default state with no status indicator
- **Status dot**: Shows a colored dot indicator
  - **Static**: Solid color indicator
  - **Pulse**: Animated pulsing indicator for attention
- **Status border**: Shows a colored border around the avatar
  - **Static**: Solid color border
  - **Pulse**: Animated pulsing border for attention

<Component>
  <Demo.StatusPulseAvatar />
</Component>

## Options <span id="options"></span>

Avatars provide various options for customization:

### Size

Six predefined sizes allow for flexibility in different UI contexts:

- 2extra-small (2xs)
- extra-small (xs)
- small (sm)
- medium (md) - default
- large (lg)
- extra-large (xl)

<Component>
  <Demo.SizesAvatar />
</Component>

### Content types

- **Image**: `src` property provides an image URL
- **Initials**: `initials` property shows 1-3 characters of text
- **Placeholder**: Default icon when no image or initials are provided

### Status colors

When using status indicators, the following colors are available:

- gray
- orange
- violet
- green
- red
- yellow
- blue
- lime
- cyan

<Component>
  <Demo.StatusDotsAvatar />
</Component>

### Border styles

- **Default**: Standard border defined in design system
- **Alternative**: Secondary border style for contrast contexts
- **None**: No border

<Component>
  <Demo.BorderStylesAvatar />
</Component>

### Group display

For AvatarGroup:

- **Direction**: row (default) or column
- **Max display**: Control how many avatars to show before overflow
- **Spacing**: Customize the overlap between avatars
- **Custom overflow**: Option to provide custom overflow indicator

## üé® Design Tokens for Avatar

| **Token**                                          | **Color for**               | **State/Meaning**                       | **CSS Selector(s)**                                  |
| -------------------------------------------------- | --------------------------- | --------------------------------------- | ---------------------------------------------------- |
| **--par-color-bg-avatar**                          | Avatar background           | Default background                      | `.avatar`                                            |
| **--par-color-border-avatar**                      | Avatar border               | Default border                          | `.avatar`, `.avatar.border`                          |
| **--par-color-bg-avatar-group**                    | AvatarGroup background      | Group container background              | `.avatar-group`                                      |
| **--par-color-border-avatar-group**                | AvatarGroup border          | Group container border                  | `.avatar-group`                                      |
| **--par-color-bg-avatar-status-dot-\<color\>**     | Status dot background       | Status indicator dot (by status)        | `.avatar-status-dot.color-\<color\>`                 |
| **--par-color-border-avatar-status-dot-\<color\>** | Status dot border           | Status indicator dot border (by status) | `.avatar-status-dot.color-\<color\>`                 |
| **--par-color-bg-avatar-status-border-\<color\>**  | Status border background    | Status border around avatar (by status) | `.avatar-status-border.color-\<color\>`              |
| **--par-color-text-avatar-initials**               | Initials text               | Initials fallback                       | `.avatar-initials`                                   |
| **--par-color-bg-avatar-placeholder**              | Placeholder icon background | Placeholder icon background             | `.avatar-placeholder`                                |
| **--par-color-icon-avatar-placeholder**            | Placeholder icon            | Placeholder icon color                  | `.avatar-placeholder`                                |
| **--par-color-bg-avatar-active**                   | AvatarTrigger background    | Active/focus/selected state             | `.avatar-trigger:active`, `.avatar-trigger.selected` |
| **--par-color-border-avatar-active**               | AvatarTrigger border        | Active/focus/selected state             | `.avatar-trigger:active`, `.avatar-trigger.selected` |
| **--par-color-bg-avatar-disabled**                 | Avatar background           | Disabled state                          | `.avatar[aria-disabled='true']`, `.avatar.disabled`  |
| **--par-color-border-avatar-disabled**             | Avatar border               | Disabled state                          | `.avatar[aria-disabled='true']`, `.avatar.disabled`  |

---

### `<AvatarGroup />`

| **Prop**            | **Type**                                      | **Default** | **Description**                                       |
| ------------------- | --------------------------------------------- | ----------- | ----------------------------------------------------- |
| **max**             | number                                        | _5_         | Max avatars to display before overflow.               |
| **direction**       | 'row' \| 'column'                             | _'row'_     | Stack direction.                                      |
| **spacing**         | string                                        | _'-0.5rem'_ | Spacing between avatars.                              |
| **size**            | AvatarSize                                    | _'medium'_  | Size for all avatars in the group.                    |
| **borderStyle**     | 'default' \| 'alternative' \| 'none'          | _'default'_ | Border style for all avatars.                         |
| **renderOverflow**  | (overflowCount: number) => ReactNode          |             | Custom overflow indicator.                            |
| **onOverflowClick** | (e: MouseEvent&lt;HTMLDivElement&gt;) => void |             | Handler for overflow avatar click.                    |
| **...divProps**     | HTMLDivElement props                          |             | All native div props (**className**, **style**, etc.) |

---

### `<AvatarTrigger />`

| **Prop**           | **Type**                                      | **Default** | **Description**                         |
| ------------------ | --------------------------------------------- | ----------- | --------------------------------------- |
| **onClick**        | (e: MouseEvent&lt;HTMLDivElement&gt;) => void |             | Click handler for the trigger.          |
| **active**         | boolean                                       | _false_     | Whether the trigger is active/selected. |
| **...AvatarProps** | [See above](#avatar)                          |             | All props from **Avatar**.              |

> **Note:** _AvatarTrigger_ **extends** all props from **Avatar**. See the Avatar props table above for details.

---

## Behaviors <span id="behaviors"></span>

### Image handling

- Avatar automatically handles image loading failures by showing initials or a placeholder icon
- Images maintain aspect ratio inside the circular container with object-fit: cover

### AvatarGroup behaviors

- Avatars stack with a negative margin for an overlapping effect
- Direction can be row (horizontal stack) or column (vertical stack)
- Maximum display count limits how many avatars show before displaying an overflow indicator
- Custom overflow rendering allows for specialized overflow indicators

### AvatarTrigger behaviors

- Functions as a button that can be clicked to trigger actions
- Provides appropriate accessibility attributes for interactive elements
- Can display an active/selected state to indicate current selection

### Accessibility

- Images include appropriate alt text for screen readers
- When no meaningful alt text is available, it uses empty alt to avoid redundant announcements
- Placeholder icons are marked as decorative (aria-hidden)
- AvatarTrigger provides appropriate keyboard interaction patterns

### Responsiveness

- Avatars maintain their aspect ratio and circular shape across screen sizes
- AvatarGroup can adjust overflow count based on available space

## Changelog <span id="changelog"></span>

| Date       | Type                                                     | Description                               | Author         | Associated issue(s) |
| :--------- | :------------------------------------------------------- | :---------------------------------------- | :------------- | :------------------ |
| 2025-05-13 | <Badge size='sm' kind='glass' color='cyan' label="new"/> | Initial specification of Avatar component | GitHub Copilot | PAR-52              |
